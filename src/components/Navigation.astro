---
const nav = [
  {
    title: 'Home',
    href: '#',
  },
  {
    title: 'Introduction',
    href: '#',
  },
  {
    title: 'General Principles',
    href: '#',
  },
  {
    title: 'Core Track',
    href: '#',
    children: [
      {
        title: 'Role Descriptions',
        href: '#',
      },
      {
        title: 'Capabilities',
        href: '#',
      },
      {
        title: 'L1 Engineer',
        href: '#',
      },
      {
        title: 'L2 Engineer',
        href: '#',
      },
      {
        title: 'L3 Engineer',
        href: '#',
      },
      {
        title: 'L4 Senior',
        href: '#',
      },
      {
        title: 'L5 Staff',
        href: '#',
      },
      {
        title: 'L6 Principal',
        href: '#',
      },
    ],
  },
  {
    title: 'Manager Track',
    href: '#',
    children: [
      {
        title: 'Role Descriptions',
        href: '#',
      },
      {
        title: 'Capabilities',
        href: '#',
      },
      {
        title: 'M3 Manager',
        href: '#',
      },
      {
        title: 'M4 Senior Manager',
        href: '#',
      },
      {
        title: 'M5 Director',
        href: '#',
      },
      {
        title: 'M6 Senior Director',
        href: '#',
      },
    ],
  },
  {
    title: 'Guides',
    href: '#',
    children: [
      {
        title: 'Guide A',
        href: '#',
      },
      {
        title: 'Guide B',
        href: '#',
      },
      {
        title: 'Guide C',
        href: '#',
      },
    ],
  },
  {
    title: 'Appendixes',
    href: '#',
    children: [
      {
        title: 'Appendix A',
        href: '#',
      },
      {
        title: 'Appendix B',
        href: '#',
      },
      {
        title: 'Appendix C',
        href: '#',
      },
    ],
  },
  {
    title: 'Contributors & Collaborators',
    href: '#',
  },
];
---

<div
  id="sidebar"
  class="fixed top-0 left-0 z-20 w-72 h-screen lg:sticky -translate-x-full lg:translate-x-0 transition-transform duration-200 ease-in-out"
>
  <div class="flex flex-col h-full bg-white/80 backdrop-blur-sm border-r border-slate-200">
    <div class="h-16 flex-shrink-0 lg:hidden">
      {/* Sidebar header space */}
    </div>
    <nav class="flex-1 px-4 py-4 space-y-2 overflow-y-auto">
      {
        nav.map((item) =>
          item.children ? (
            <div class="py-2 border-t border-slate-200">
              <span class="block px-3 py-2 text-xs font-semibold tracking-wide text-slate-900 uppercase">
                {item.title}
              </span>
              <div class="mt-1 space-y-1">
                {item.children.map((child) => (
                  <a
                    href="#"
                    class="block px-3 py-2 text-sm text-slate-600 rounded-lg hover:bg-slate-100 hover:text-slate-900"
                  >
                    {child.title}
                  </a>
                ))}
              </div>
            </div>
          ) : (
            <div class="">
              <a
                href="#"
                class="block px-3 py-2 text-sm text-slate-600 rounded-lg hover:bg-slate-100 hover:text-slate-900"
              >
                {item.title}
              </a>
            </div>
          ),
        )
      }
    </nav>
  </div>
</div>

<script>
  import { isNavOpen } from './stores.js';

  isNavOpen.subscribe((open) => {
    document.getElementById('sidebar').classList.toggle('translate-x-0', open);
    document.getElementById('sidebar').classList.toggle('lg:translate-x-0', !open);
    document.getElementById('sidebar').classList.toggle('-translate-x-full', !open);
  });
</script>
